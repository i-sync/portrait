{% extends 'base.html' %}

{% block title %}{{ data.album.title }}{% endblock %}

{% block metadata %}
<meta name="keywords" content="{{ data.keywords }}" />
<meta name="description" content="{{ data.album.description }}" />
<meta name="og:url" content="{{ data.url }}" />
<meta name="og:title" content="{{ data.album.title }}" />
<meta name="og:description" content="{{ data.album.description  }}" />
<meta name="og:image" content="{{data.cover }}" />
<meta name="twitter:url" content="{{data.url}}" />
<meta name="twitter:title" content="{{ data.album.title }}" />
<meta name="twitter:description" content="{{ data.album.description }}" />
<meta name="twitter:image" content="{{data.cover }}" />
<meta name="twitter:card" content="summary_large_image" />
{% endblock %}

{% block head %} {% endblock %}

{% block content %}

<div class="container">
    <div class="border border-success p-1 mb-2 text-center">
        <h1>{{data.album.digest}}</h1>
        <div>{{data.album.title}}</div>
        <div>{{data.album.description}}</div>
    </div>
    <div class=" mb-2">
        <small class="text-muted">
            <span>浏览:</span>
            <span>
                <script src="/plus/count/{{data.album.id}}" language="javascript"></script>
            </span>
            <span> / 日期:</span>
            <span>{{data.album.origin_created_at|date}}</span>
            <span> / 出镜:</span>
            <span>{{data.album.author}}</span>
        </small>
    </div>
    <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
        <ol class="breadcrumb">
            {% if data.album.category %}
            <li class="breadcrumb-item">
                <a href="/" alt="首页" title="首页">首页</a>
            </li>
            <li class="breadcrumb-item">
                <a href="/{{ data.album.category.name}}" alt="{{data.album.category.title}}" title="{{data.album.category.title}}">{{data.album.category.title}}</a>
            </li>
            <li class="breadcrumb-item active" aria-current="{{data.album.digest}}">{{data.album.digest}}</li>
            {% endif %}
        </ol>
    </nav>

    {{ pagination_all('?page=', data.page) }}
        {% for image in data.images %}
        <img data-src="{{image.image_url}}" src="/static/images/loader.gif" class="img-fluid w-100 lazy mb-2" alt="{{data.album.title}}" referrerpolicy="no-referrer" />
        {% endfor %} 
    {{ pagination_all('?page=', data.page) }}
</div>
{% endblock %} {% block bodyscript %}

<script>
    window.lazyLoadOptions = {
        threshold: 0,
    };
    window.addEventListener(
        "LazyLoad::Initialized",
        function (e) {
            console.log(e.detail.instance);
        },
        false
    );
</script>
{% endblock %}
